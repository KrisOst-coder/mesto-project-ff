(()=>{"use strict";var e,t,n,o,r={386:(e,t,n)=>{n.d(t,{BU:()=>p,CO:()=>c,F3:()=>d,cD:()=>s,eF:()=>a,gm:()=>i,io:()=>l,oS:()=>u});var o={baseUrl:"https://nomoreparties.co/v1/wff-cohort-10",headers:{authorization:"1b672ea5-50fb-43e7-92f6-8a26aeae5f47","Content-Type":"application/json"}},r=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))},a=function(){return fetch("".concat(o.baseUrl,"/users/me"),{headers:o.headers}).then(r)},c=function(){return fetch("".concat(o.baseUrl,"/cards"),{headers:o.headers}).then(r)},u=function(e){return fetch("".concat(o.baseUrl,"/users/me"),{method:"PATCH",headers:o.headers,body:e}).then(r)},i=function(e){return fetch("".concat(o.baseUrl,"/cards"),{method:"POST",headers:o.headers,body:e}).then(r)},s=function(e){return fetch("".concat(o.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:o.headers}).then(r)},l=function(e){return fetch("".concat(o.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:o.headers}).then(r)},d=function(e){return fetch("".concat(o.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:o.headers}).then(r)},p=function(e){return fetch("".concat(o.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:o.headers,body:e}).then(r)}},262:(e,t,n)=>{n.a(e,(async(e,o)=>{try{n.d(t,{z:()=>d});var r=n(195),a=n(386),c=n(26),u=e([c]);c=(u.then?(await u)():u)[0];var i=document.querySelector("#card-template").content,s=document.querySelector(".popup_agree_with_delete");function l(e,t,n){return e.likes.some((function(e){return e._id===n}))?(t.classList.remove("card__like-button_is-active"),!0):(t.classList.add("card__like-button_is-active"),!1)}function d(e,t){var n=e.name,o=e.link,u=i.querySelector(".places__item").cloneNode(!0),d=u.querySelector(".card__image");if(d.alt=n,d.src=o,u.querySelector(".card__title").textContent=n,d.addEventListener("click",(function(){return(0,c.L)(o,n)})),u.querySelector(".likes-count").textContent=e.likes.length,t===e.owner._id){console.log("in");var p=u.querySelector(".card__delete-button"),_=document.querySelector(".popup__button_agree_with_delete");p.addEventListener("click",(function(){(0,r.u)(s),_.addEventListener("click",(function(){(0,a.cD)(e._id,u).then((function(e){u.remove(),(0,r.G)(s)}))}))}))}else u.querySelector(".card__delete-button").style.display="none";var f=u.querySelector(".card__like-button");return e.likes.some((function(e){return e._id===t}))&&f.classList.add("card__like-button_is-active"),f.addEventListener("click",(function(){l(e,f,t)?(0,a.F3)(e._id).then((function(t){u.querySelector(".likes-count").textContent=t.likes.length,console.log("вот так",t),e=t})):(0,a.io)(e._id).then((function(t){u.querySelector(".likes-count").textContent=t.likes.length,console.log("вот так",t),e=t}))})),u}o()}catch(p){o(p)}}))},26:(e,t,n)=>{n.a(e,(async(e,o)=>{try{n.d(t,{L:()=>X});var r=n(262),a=n(195),c=n(763),u=n(386),i=e([r]);r=(i.then?(await i)():i)[0],document.querySelector("#card-template").content;var s=document.querySelector(".places__list"),l=document.querySelector(".profile__edit-button"),d=document.querySelector(".popup_type_edit"),p=document.querySelector(".profile__add-button"),_=document.querySelector(".popup_type_new-card"),f=document.querySelector(".popup_type_image"),m=document.querySelector(".edit__close"),v=document.querySelector(".new__close"),y=document.querySelector(".image__close"),h=document.querySelector(".popup__input_type_name"),b=document.querySelector(".profile__title"),S=document.querySelector(".popup__input_type_description"),q=document.querySelector(".profile__description"),L=document.querySelector(".popup__image"),k=document.querySelector(".popup__caption"),g=document.querySelector(".popup_agree_with_delete"),E=document.querySelector(".delete__close"),C=document.querySelector(".popup_update_avatar"),x=document.querySelector(".avatar__close"),w=document.forms["edit-profile"],U=document.forms["new-place"],T=document.forms["update-avatar"],A=U.querySelector(".popup__button"),O=T.querySelector(".popup__button");console.log(A.disabled),A.disabled=!0,O.disabled=!0;var P=[d,_,f,g,C],j=[m,v,y,E,x],D={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},F=await fetch("https://nomoreparties.co/v1/wff-cohort-10/users/me",{headers:{authorization:"1b672ea5-50fb-43e7-92f6-8a26aeae5f47","Content-Type":"application/json"}}),G=(await F.json())._id;(0,u.CO)().then((function(e){e.forEach((function(e){s.append((0,r.z)(e,G)),f.classList.add("popup_is-animated")}))})),(0,u.eF)().then((function(e){b.textContent=e.name,q.textContent=e.about,$.style["background-image"]="url(".concat(e.avatar,")")})),_.classList.add("popup_is-animated"),d.classList.add("popup_is-animated"),l.addEventListener("click",(function(e){(0,a.u)(d),h.value=b.textContent,S.value=q.textContent})),p.addEventListener("click",(function(e){(0,a.u)(_)}));for(var z=function(e){j[e].addEventListener("click",(function(t){(0,a.G)(P[e]),j[e]===m?(0,c.R)(w,D):j[e]===v&&(0,c.R)(U,D)}))},B=0;B<P.length;++B)z(B);function Q(e){e.forEach((function(e){e.addEventListener("click",(function(t){t.target.classList.contains("popup")&&(0,a.G)(e)}))}))}var N=w.elements.name,J=w.elements.description,R=w.querySelector(".popup__button");function W(e){R.textContent="Сохранение...",R.disabled=!1,e.preventDefault();var t=N.value,n=J.value;(0,u.oS)(JSON.stringify({name:t,about:n})),b.textContent=t,q.textContent=n,R.textContent="Сохранить",R.disabled=!0,(0,a.G)(d)}function X(e,t){L.src=e,L.alt=t,k.textContent=t,(0,a.u)(f)}w.addEventListener("submit",W);var H=U.elements["place-name"],M=U.elements.url,V=U.querySelector(".popup__button");function Y(e){V.textContent="Сохранение...",V.disabled=!1,e.preventDefault(),(0,u.gm)(JSON.stringify({name:H.value,link:M.value})).then((function(e){s.prepend((0,r.z)(e,G)),f.classList.add("popup_is-animated")})),f.classList.add("popup_is-animated"),V.textContent="Сохранить",V.disabled=!0,(0,a.G)(_),H.value="",M.value=""}U.addEventListener("submit",Y),Q([d,_,f]);var Z=document.querySelector(".profile__image"),$=document.querySelector(".profile__image"),I=T.elements.url,K=T.querySelector(".popup__button");function ee(e){K.textContent="Сохранение...",K.disabled=!1,e.preventDefault(),(0,u.BU)(JSON.stringify({avatar:I.value})).then((function(e){$.style["background-image"]="url(".concat(e.avatar,")"),I.value="",K.textContent="Сохранить",K.disabled=!0,(0,a.G)(C)}))}Z.addEventListener("click",(function(e){(0,a.u)(C)})),T.addEventListener("submit",ee),(0,c.F)(D),o()}catch(te){o(te)}}),1)},195:(e,t,n)=>{function o(e){"Escape"===e.key&&a(document.querySelector(".popup_is-opened"))}function r(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",o)}function a(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",o)}n.d(t,{G:()=>a,u:()=>r})},763:(e,t,n)=>{n.d(t,{F:()=>s,R:()=>l});var o=/^[а-яА-Яa-zA-ZЁё\-\s]*$/,r=function(e,t){e.some((function(e){return"True"!==a(e)}))?(t.disabled=!0,t.classList.add("inactive__popup__button")):(t.disabled=!1,t.classList.remove("inactive__popup__button"))};function a(e){var t=e.value;return e.validity.valid?"url"===e.name||t.match(o)?"True":e.dataset.errorMessage:(e.setCustomValidity(""),"False")}var c=function(e,t,n){e.classList.add("form__input_type_error"),n.textContent=t,n.classList.add("form__input-error_active")},u=function(e,t){e.classList.remove("form__input_type_error"),t.classList.remove("form__input-error_active"),t.textContent=""},i=function(e,t){var n=a(e);"True"===n?u(e,t):"False"===n?(console.log("here1"),c(e,e.validationMessage,t)):(console.log("here"),c(e,n,t))};function s(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach((function(t){t.addEventListener("input",(function(){var a=e.querySelector(".".concat(t.classList[1],"-error"));i(t,a),r(n,o)}))}))}(t,e)}))}function l(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach((function(t){var n=e.querySelector(".".concat(t.classList[1],"-error"));u(t,n)})),r(n,o)}}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e](n,n.exports,c),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(r,a,c)=>{var u;c&&((u=[]).d=-1);var i,s,l,d=new Set,p=r.exports,_=new Promise(((e,t)=>{l=t,s=e}));_[t]=p,_[e]=e=>(u&&e(u),d.forEach(e),_.catch((e=>{}))),r.exports=_,a((r=>{var a;i=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var a=[];a.d=0,r.then((e=>{c[t]=e,o(a)}),(e=>{c[n]=e,o(a)}));var c={};return c[e]=e=>e(a),c}}var u={};return u[e]=e=>{},u[t]=r,u})))(r);var c=()=>i.map((e=>{if(e[n])throw e[n];return e[t]})),s=new Promise((t=>{(a=()=>t(c)).r=0;var n=e=>e!==u&&!d.has(e)&&(d.add(e),e&&!e.d&&(a.r++,e.push(a)));i.map((t=>t[e](n)))}));return a.r?s:c()}),(e=>(e?l(_[n]=e):s(p),o(u)))),u&&u.d<0&&(u.d=0)},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(26)})();