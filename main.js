(()=>{"use strict";var e,t,o,n,r={386:(e,t,o)=>{o.d(t,{BU:()=>d,CO:()=>c,F3:()=>l,cD:()=>i,eF:()=>r,gm:()=>u,io:()=>s,oS:()=>a});var n={baseUrl:"https://nomoreparties.co/v1/wff-cohort-10",headers:{authorization:"1b672ea5-50fb-43e7-92f6-8a26aeae5f47","Content-Type":"application/json"}},r=function(){return fetch("".concat(n.baseUrl,"/users/me"),{headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},c=function(){return fetch("".concat(n.baseUrl,"/cards"),{headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},a=function(e){return fetch("".concat(n.baseUrl,"/users/me"),{method:"PATCH",headers:n.headers,body:e}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},u=function(e){return fetch("".concat(n.baseUrl,"/cards"),{method:"POST",headers:n.headers,body:e}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},i=function(e){return fetch("".concat(n.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},s=function(e){return fetch("".concat(n.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},l=function(e){return fetch("".concat(n.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:n.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))},d=function(e){return fetch("".concat(n.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:n.headers,body:e}).then((function(e){return e.ok?(console.log(e),e.json()):Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},262:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{z:()=>p});var r=o(195),c=o(386),a=o(26),u=e([a]);a=(u.then?(await u)():u)[0];var i=document.querySelector("#card-template").content,s=document.querySelector(".popup_agree_with_delete"),l=await fetch("https://nomoreparties.co/v1/wff-cohort-10/users/me",{headers:{authorization:"1b672ea5-50fb-43e7-92f6-8a26aeae5f47","Content-Type":"application/json"}}),d=(await l.json())._id;function p(e){var t=e.name,o=e.link,n=i.querySelector(".places__item").cloneNode(!0),u=n.querySelector(".card__image");if(u.alt=t,u.src=o,n.querySelector(".card__title").textContent=t,u.addEventListener("click",(function(){return(0,a.L)(o,t)})),n.querySelector(".likes-count").textContent=e.likes.length,d===e.owner._id){console.log("in");var l=n.querySelector(".card__delete-button"),p=document.querySelector(".popup__button_agree_with_delete");l.addEventListener("click",(function(){(0,r.uT)(s),p.addEventListener("click",(function(){(0,c.cD)(e._id,n).then((function(e){n.remove(),(0,r.GK)(s)}))}))}))}else n.querySelector(".card__delete-button").style.display="none";var _=n.querySelector(".card__like-button");return e.likes.some((function(e){return e._id===d}))&&_.classList.add("card__like-button_is-active"),_.addEventListener("click",(function(){e.likes.some((function(e){return e._id===d}))?(_.classList.remove("card__like-button_is-active"),(0,c.F3)(e._id).then((function(t){n.querySelector(".likes-count").textContent=t.likes.length,e=t}))):(_.classList.add("card__like-button_is-active"),(0,c.io)(e._id).then((function(t){n.querySelector(".likes-count").textContent=t.likes.length,e=t})))})),n}n()}catch(_){n(_)}}),1)},197:(e,t,o)=>{},26:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{L:()=>Z}),o(197);var r=o(262),c=o(195),a=o(763),u=o(386),i=e([r]);r=(i.then?(await i)():i)[0],document.querySelector("#card-template").content;var s=document.querySelector(".places__list"),l=document.querySelector(".profile__edit-button"),d=document.querySelector(".popup_type_edit"),p=document.querySelector(".profile__add-button"),_=document.querySelector(".popup_type_new-card"),f=document.querySelector(".popup_type_image"),m=document.querySelector(".edit__close"),v=document.querySelector(".new__close"),h=document.querySelector(".image__close"),y=document.querySelector(".popup__input_type_name"),b=document.querySelector(".profile__title"),S=document.querySelector(".popup__input_type_description"),q=document.querySelector(".profile__description"),k=document.querySelector(".popup__image"),L=document.querySelector(".popup__caption"),g=document.querySelector(".popup_agree_with_delete"),E=document.querySelector(".delete__close"),C=document.querySelector(".popup_update_avatar"),w=document.querySelector(".avatar__close"),x=document.forms["edit-profile"],j=document.forms["new-place"],T=document.forms["update-avatar"],P=[d,_,f,g,C],U=[m,v,h,E,w],O={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};(0,u.CO)().then((function(e){e.forEach((function(e){s.append((0,r.z)(e)),f.classList.add("popup_is-animated")}))})),(0,u.eF)().then((function(e){b.textContent=e.name,q.textContent=e.about,R.style["background-image"]="url(".concat(e.avatar,")")})),_.classList.add("popup_is-animated"),d.classList.add("popup_is-animated"),l.addEventListener("click",(function(e){(0,c.uT)(d),y.value=b.textContent,S.value=q.textContent})),p.addEventListener("click",(function(e){(0,c.uT)(_)}));for(var D=function(e){U[e].addEventListener("click",(function(t){(0,c.GK)(P[e]),U[e]===m?(0,a.R)(x,O):U[e]===v&&(0,a.R)(j,O)}))},F=0;F<P.length;++F)D(F);var A=x.elements.name,z=x.elements.description,G=x.querySelector(".popup__button");function V(e){G.textContent="Сохранение...",G.disabled=!0,e.preventDefault();var t=A.value,o=z.value;(0,u.oS)(JSON.stringify({name:t,about:o})),b.textContent=t,q.textContent=o,(0,c.GK)(d,G)}function Z(e,t){k.src=e,k.alt=t,L.textContent=t,(0,c.uT)(f)}x.addEventListener("submit",V);var K=j.elements["place-name"],N=j.elements.url,B=j.querySelector(".popup__button");function $(e){B.textContent="Сохранение...",B.disabled=!0,e.preventDefault(),(0,u.gm)(JSON.stringify({name:K.value,link:N.value})).then((function(e){s.prepend((0,r.z)(e)),f.classList.add("popup_is-animated")})),f.classList.add("popup_is-animated"),(0,c.GK)(_,B),K.value="",N.value=""}j.addEventListener("submit",$),(0,c.NY)([d,_,f]);var J=document.querySelector(".profile__image"),R=document.querySelector(".profile__image"),H=T.elements.url,M=T.querySelector(".popup__button");function I(e){M.textContent="Сохранение...",M.disabled=!0,e.preventDefault(),(0,u.BU)(JSON.stringify({avatar:H.value})).then((function(e){R.style["background-image"]="url(".concat(e.avatar,")"),H.value="",(0,c.GK)(C,M)}))}J.addEventListener("click",(function(e){(0,c.uT)(C)})),T.addEventListener("submit",I);var Y=[x,j,T];(0,a.F)(Y),n()}catch(Q){n(Q)}}))},195:(e,t,o)=>{function n(e,t){"Escape"===e.key&&c(document.querySelector(".popup_is-opened"))}function r(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",n)}function c(e,t){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",n),t.textContent="Сохранить",t.disabled=!1}function a(e){e.forEach((function(e){e.addEventListener("click",(function(t){t.target.classList.contains("popup")&&c(e)}))}))}o.d(t,{GK:()=>c,NY:()=>a,uT:()=>r})},763:(e,t,o)=>{o.d(t,{F:()=>s,R:()=>l}),document.querySelector(".popup_type_edit").querySelector(".popup__button");var n=/^[а-яА-Яa-zA-ZЁё\-\s]*$/,r=function(e,t){e.some((function(e){return"True"!==c(e)}))?(t.disabled=!0,t.classList.add("inactive__popup__button")):(t.disabled=!1,t.classList.remove("inactive__popup__button"))};function c(e){var t=e.value;return e.validity.valid?"url"===e.name||t.match(n)?"True":e.dataset.errorMessage:(e.setCustomValidity(""),"False")}var a=function(e,t,o){e.classList.add("form__input_type_error"),o.textContent=t,o.classList.add("form__input-error_active")},u=function(e,t){e.classList.remove("form__input_type_error"),t.classList.remove("form__input-error_active"),t.textContent=""},i=function(e,t){var o=c(e);"True"===o?u(e,t):"False"===o?(console.log("here1"),a(e,e.validationMessage,t)):(console.log("here"),a(e,o,t))};function s(e){e.forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(".popup__input")),o=e.querySelector(".popup__button");t.forEach((function(n){n.addEventListener("input",(function(){var c=e.querySelector(".".concat(n.classList[1],"-error"));i(n,c),r(t,o)}))}))}(e)}))}function l(e,t){var o=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);o.forEach((function(t){var o=e.querySelector(".".concat(t.classList[1],"-error"));u(t,o)})),r(o,n)}}},c={};function a(e){var t=c[e];if(void 0!==t)return t.exports;var o=c[e]={exports:{}};return r[e](o,o.exports,a),o.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(r,c,a)=>{var u;a&&((u=[]).d=-1);var i,s,l,d=new Set,p=r.exports,_=new Promise(((e,t)=>{l=t,s=e}));_[t]=p,_[e]=e=>(u&&e(u),d.forEach(e),_.catch((e=>{}))),r.exports=_,c((r=>{var c;i=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var c=[];c.d=0,r.then((e=>{a[t]=e,n(c)}),(e=>{a[o]=e,n(c)}));var a={};return a[e]=e=>e(c),a}}var u={};return u[e]=e=>{},u[t]=r,u})))(r);var a=()=>i.map((e=>{if(e[o])throw e[o];return e[t]})),s=new Promise((t=>{(c=()=>t(a)).r=0;var o=e=>e!==u&&!d.has(e)&&(d.add(e),e&&!e.d&&(c.r++,e.push(c)));i.map((t=>t[e](o)))}));return c.r?s:a()}),(e=>(e?l(_[o]=e):s(p),n(u)))),u&&u.d<0&&(u.d=0)},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(26)})();